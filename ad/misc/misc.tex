\section{Misc Active directory Misconfigs}


\subsection{MS14-068}
This was a flaw in the Kerberos protocol, which could be leveraged along with
standard domain user credentials to elevate privileges to Domain Admin. A
Kerberos ticket contains information about a user, including the account name,
ID, and group membership in the Privilege Attribute Certificate (PAC). The PAC
is signed by the KDC using secret keys to validate that the PAC has not been
tampered with after creation.

The vulnerability allowed a forged PAC to be accepted by the KDC as legitimate.
This can be leveraged to create a fake PAC, presenting a user as a member of
the Domain Administrators or other privileged group. It can be exploited with
tools such as the
\href{https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek}{Python
Kerberos Exploitation Kit (PyKEK)} or the Impacket toolkit~\ref{tool:impacket}.
The only defense against this attack is patching.


\subsection{Credentials in SMB Shares and SYSVOL Scripts}
The \verb+SYSVOL+ share can be a treasure trove of data, especially in large
organizations. We may find many different batch, VBScript, and PowerShell
scripts within the scripts directory, which is readable by all authenticated
users in the domain. It is worth digging around this directory to hunt for
passwords stored in scripts. 
