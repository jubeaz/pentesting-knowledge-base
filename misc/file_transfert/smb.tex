\section{over SMB}
In case SMB traffic through the firewall has been restricted, WebDAV may be a good option, as it relies on HTTP as a transport protocol. Some common tools that support file transfers from SMB and WebDAV shares are reviewed below.



\subsection{Linux Server}


\subsubsection{Impacket SMBServer}

\begin{verbatim}
smbserver.py --help

smbserver.py -smb2support  -user USERNAME -password PASSWORD SHARE_NAME <location>

sudo smbclient -L 127.0.0.1
\end{verbatim}

\subsection{Windows Servers}

\url{https://ppn.snovvcrash.rocks/pentest/infrastructure/ad/smb}

\url{https://github.com/3gstudent/Invoke-BuildAnonymousSMBServer}

\begin{verbatim}
mkdir C:\share
icacls C:\share\ /T /grant Anonymous` logon:r
icacls C:\share\ /T /grant Everyone:r
New-SmbShare -Path C:\share -Name share -ReadAccess 'ANONYMOUS LOGON','Everyone'
REG ADD "HKLM\System\CurrentControlSet\Services\LanManServer\Parameters" /v NullSessionPipes /t REG_MULTI_SZ /d srvsvc /f  # this will overwrite existing NullSessionPipes
REG ADD "HKLM\System\CurrentControlSet\Services\LanManServer\Parameters" /v NullSessionShares /t REG_MULTI_SZ /d share /f
REG ADD "HKLM\System\CurrentControlSet\Control\Lsa" /v EveryoneIncludesAnonymous /t REG_DWORD /d 1 /f
REG ADD "HKLM\System\CurrentControlSet\Control\Lsa" /v RestrictAnonymous /t REG_DWORD /d 0 /f

\end{verbatim}



\subsection{Windows client}


\begin{verbatim}
 net use z: \\IP\SHARE_NAME /user:LOGIN PASSWORD
# or simply
\\IP\SHARE_NAME /user:LOGIN PASSWORD

\end{verbatim}


\begin{verbatim}
# Copy-Item
Copy-Item c:\MyTestFolder\* -Destination \\$comp1\c$\Test -Force -Recurse
PS C:\> Copy-Item -Path C:\Temp\nc.exe -Destination C:\Temp\nc.exe -ToSession $session

# Set-Content
PS C:\> $file = Get-Content C:\Temp\nc.exe -Raw
PS C:\> Invoke-Command -ComputerName 10.10.10.132 -ScriptBlock {Set-Content -Path C:\Temp\nc.exe -value $using:file}
# Copy / xcopy / robocopy
PS C:\> xcopy \\10.10.10.132\share\nc.exe nc.exe
PS C:\> copy C:\Temp\nc.exe \\10.10.10.132\c$\Temp\nc.exe
# Map / Mount Drives
PS C:\> net use Q: \\10.10.10.132\share
PS C:\> pushd \\10.10.10.132\share
PS C:\> mklink /D share \\10.10.10.132\share
\end{verbatim}

\subsection{Linux client}

\subsubsection{Smbclient}
\begin{verbatim}
smbclient //10.10.10.132/share -U username -W domain
\end{verbatim}

\subsubsection{Impacket}
\begin{verbatim}

\end{verbatim}
