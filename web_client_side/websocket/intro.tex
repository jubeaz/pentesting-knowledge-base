\section{Introduction}
WebSocket is a computer communications protocol, providing full-duplex
communication channels over a single TCP connection.

WebSocket is distinct from HTTP and depend on TCP. Although they are different,
RFCÂ 6455 states that WebSocket \emph{is designed to work over HTTP ports 443
and 80 as well as to support HTTP proxies and intermediaries}, thus making it
compatible with HTTP. To achieve compatibility, the WebSocket handshake uses
the {\bf HTTP Upgrade header} to change from the HTTP protocol to the WebSocket
protocol. 

The WebSocket protocol enables interaction between a client application and a
web server with lower overhead than half-duplex alternatives such as HTTP
polling, facilitating real-time data transfer from and to the server. This is
made possible by providing a standardized way for the server to send content to
the client without being first requested by the client, and allowing messages
to be passed back and forth while keeping the connection open. In this way, a
two-way ongoing conversation can take place between the client and the server.

Additionally, WebSocket enables streams of messages on top of TCP.

The WebSocket protocol specification defines \verb+ws+ (WebSocket) and
\verb+wss+ (WebSocket Secure) as two new URI schemes.

\subsection{Protocol}
\subsubsection{Handshake}
To establish a WebSocket connection, the client sends a WebSocket handshake
request, for which the server returns a WebSocket handshake response, as shown
in the example below.

\begin{verbatim}
GET /chat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat, superchat
Sec-WebSocket-Version: 13
Origin: http://example.com
\end{verbatim}

Server response:
\begin{verbatim}
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
Sec-WebSocket-Protocol: chat
\end{verbatim}

The handshake starts with an HTTP request/response, allowing servers to handle
HTTP connections as well as WebSocket connections on the same port. Once the
connection is established, communication switches to a bidirectional binary
protocol which does not conform to the HTTP protocol.

In addition to Upgrade headers, the client sends a \verb+Sec-WebSocket-Key+
header containing base64-encoded random bytes, and the server replies with a
hash of the key in the \verb+Sec-WebSocket-Accept+ header. This is intended to
prevent a caching proxy from re-sending a previous WebSocket conversation, and
does not provide any authentication, privacy, or integrity. i

The hashing function appends the fixed string
258EAFA5-E914-47DA-95CA-C5AB0DC85B11 (a UUID) to the value from
\verb+Sec-WebSocket-Key+ header (which is not decoded from base64), applies the
SHA-1 hashing function, and encodes the result using base64.a

\subsection{Security considerations}
Unlike regular cross-domain HTTP requests, {\bf WebSocket requests are not
restricted by the same-origin policy}. Therefore, WebSocket servers must
validate the "Origin" header against the expected origins during connection
establishment, to avoid cross-site WebSocket hijacking attacks (similar to
cross-site request forgery), which might be possible when the connection is
authenticated with cookies or HTTP authentication. It is better to use tokens
or similar protection mechanisms to authenticate the WebSocket connection when
sensitive  data is being transferred over the WebSocket.


