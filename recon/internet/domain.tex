\section{Domain information}

Domain information is a core component of any penetration test, and it is not
just about the subdomains but about the entire presence on the Internet.
Therefore, we gather information and try to understand the company's
functionality and which technologies and structures are necessary for services
to be offered successfully and efficiently.

This type of information is gathered passively without direct and active scans.
In other words, we remain hidden and navigate as "customers" or "visitors" to
avoid direct connections to the company that could expose us. The OSINT
relevant sections are only a tiny part of how in-depth OSINT goes and describe
only a few of the many ways to obtain information in this way.

However, when passively gathering information, we can use third-party services
to understand the company better. However, the first thing we should do is
scrutinize the company's main website. Then, we should read through the texts,
keeping in mind what technologies and structures are needed for these
services.

For example, many IT companies offer app development, IoT, hosting, data
science, and IT security services, depending on their industry. If we encounter
a service that we have had little to do with before, it makes sense and is
necessary to get to grips with it and find out what activities it consists of
and what opportunities are available. Those services also give us a good
overview of how the company can be structured.

For example, this part is the combination between the {\emph first principle}
and the '\emph second principle} of enumeration. We pay attention to what
{\emph we see}  and {\emph we do not see}. We see the services but not their
functionality. However, services are bound to certain technical aspects
necessary to provide a service. Therefore, we take the developer's view and
look at the whole thing from their point of view. This point of view allows us
to gain many technical insights into the functionality.

Once we have a basic understanding of the company and its services, we can get
a first impression of its presence on the Internet. Let us assume that a
medium-sized company has hired us to test their entire infrastructure from a
black-box perspective. This means we have only received a scope of targets and
must obtain all further information ourselves.

\subsection{SSL certificates enumeration}

The first point of presence on the Internet may be the {\bf SSL certificate}
from the company's main website that we can examine. Often, such a certificate
includes more than just a subdomain, and this means that the certificate is
used for several domains, and these are most likely still active.

Another source to find more subdomains is \href{https://crt.sh/}{crt.sh}. This
source is
\href{https://en.wikipedia.org/wiki/Certificate_Transparency}{Certificate
Transparency} logs. Certificate Transparency is a process that is intended to
enable the verification of issued digital certificates for encrypted Internet
connections. The standard (\href{https://tools.ietf.org/html/rfc6962}{RFC
6962}) provides for the logging of all digital certificates issued by a
certificate authority in audit-proof logs. This is intended to enable the
detection of false or maliciously issued certificates for a domain. SSL
certificate providers like Let's Encrypt share this with the web interface
crt.sh, which stores the new entries in the database to be accessed later.

\begin{verbatim}
curl -s https://crt.sh/\?q\=inlanefreight.com\&output\=json | jq .

curl -s https://crt.sh/\?q\=inlanefreight.com\&output\=json \
    | jq . \
    | grep name \
    | cut -d":" -f2 \
    | grep -v "CN=" \
    | cut -d'"' -f2 \
    | awk '{gsub(/\\n/,"\n");}1;' \
    | sort -u
\end{verbatim}
