\section{Registry}
\index{Windows!registry}
\label{win:registry}

\href{https://admx.help/}{Registry database}

The \href{https://en.wikipedia.org/wiki/Windows_Registry}{Registry} is a
hierarchical database in Windows critical for the operating system. It stores
low-level settings for the Windows operating system and applications that
choose to use it. It is divided into computer-specific and user-specific data.


The \verb+regedit+ command allow to view/edit it.

The tree-structure consists of main folders (root keys) in which subfolders
(subkeys) with their entries/files (values) are located. There are 11 different
types of values that can be entered in a subkey.

Each folder under i\verb+Computer+ is a key. The root keys all start with
\verb+HKEY+. A key such as \verb+HKEY-LOCAL-MACHINE+ is abbreviated to
i\verb+HKLM+. 

\verb+HKLM+ contains all settings that are relevant to the local system. This
root key contains six subkeys like \verb+SAM+, \verb+SECURITY+, \verb+SYSTEM+,
\verb+SOFTWARE+, \verb+HARDWARE+, and \verb+BCD+, loaded into memory at boot
time (except HARDWARE which is dynamically loaded).

The entire system registry is stored in several files on the operating system.
You can find these under \verb+C:\Windows\System32\Config\+.

The user-specific registry hive (\verb+HKCU+) is stored in the user folder
(i.e., \verb+C:\Windows\Users\<USERNAME>\Ntuser.dat+).

\section{Run and RunOnce Registry Keys}

There are also so-called \gls{win:registry-hive}, which contain a logical group
of keys, subkeys, and values to support software and files loaded into memory
when the operating system is started or a user logs in. These hives are useful
for maintaining access to the system. These are called
\href{https://docs.microsoft.com/en-us/windows/win32/setupapi/run-and-runonce-registry-keys}{Run
and RunOnce registry keys}.


